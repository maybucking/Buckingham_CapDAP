---
title: "Data Analyses"
author: "May"
date: "11/8/2022"
output: html_document
---
Let's analyze the American Kestrel Dataset!

First, lets clear r's brain and add packages
```{r}
rm(list = ls())
library(tidyverse)
library(dplyr)
library(ggplot2)
library(here)
```
Now lets import the data
```{r}
kestrels <- read.csv(here("Data", "AMKE DATA TABLE 1.csv"))
```
Now lets analyze the data
First lets do a summary of all of the data to look at means and spread of data
```{r}
summary(kestrels)
```
Now lets look at a scatterplot of the percent successful boxes to see if there are any outliers and to get a general sense of the relationship between box number (x) and percent success (y)
```{r}
ggplot(kestrels, aes(x = BOX, y = X.Successful)) + geom_point(size =1)+
xlab("Box Number") +
ylab("% Success")
```
Does not look like there are too many outliers, data looks pretty uniform

Now lets look at a scatterplot of the relationship between number of chicks banded (y) and box number (x)
```{r}
ggplot(kestrels, aes(x = BOX, y = Num_Chicks_Banded)) + geom_point(size =1)+
xlab("Box Number") +
ylab("Chicks banded")
```
Looks like there could be an outlier around the 10th box (close to 30 chicks banded) 

Now lets create a histogram of the percent success so we can see the data in a different format and not in relation to box number.
```{r}
ggplot(kestrels, aes(x = X.Successful)) + geom_histogram(bins = 10)+
  xlab("Percent Success")
```
There is a gap around 10% 

looking at unique characters but i dont think this is very useful to me.
```{r}
unique(kestrels)
```
```{r}
kestrels_long <- pivot_longer(kestrels, cols = X2002_inhabitants:X2013_inhabitants, names_to = "year", values_to = "inhabitants")
```

lets get rid of X with string R
```{r}
kestrels_long1 <-str_replace(kestrels_long$year, "X", "")

kestrels_long$newYear <- kestrels_long1
view(kestrels_long)
```
Now save the data frame
```{r}
write.csv(kestrels_long, here("Data", "processed", "Correct_kestrelsX"))
write.csv(kestrels_long, here("Data", "processed", "Correct_kestrels"), row.names = FALSE)
```







